datasource db {
    provider = "sqlite"
    url      = "file:./sast.sqlite"
}

generator client {
    provider = "cargo prisma"
    output   = "../src/prisma.rs"
}

model Project {
    id           String        @id @default(uuid())
    name         String
    created_at   DateTime      @default(now())
    updated_at   DateTime      @updatedAt
    placeholders Placeholder[]
    task_sets    TaskSet[]
}

model Placeholder {
    id         String  @id @default(uuid())
    name       String
    value      String
    project    Project @relation(fields: [project_id], references: [id], onDelete: Cascade)
    project_id String

    @@unique([project_id, name])
}

model TaskSet {
    id          String  @id @default(uuid())
    name        String
    description String
    tasks       Task[]
    project     Project @relation(fields: [project_id], references: [id], onDelete: Cascade)
    project_id  String

    @@unique([project_id, name])
}

model Task {
    id                String  @id @default(uuid())
    command           String
    working_directory String
    delay             Int
    task_set          TaskSet @relation(fields: [task_set_id], references: [id], onDelete: Cascade)
    task_set_id       String
}
